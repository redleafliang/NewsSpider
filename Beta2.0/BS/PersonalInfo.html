<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=0.4, minimum-scale=0.1, maximum-scale=2.0, user-scalable=yes" />
    <title>个人中心</title>

    <link rel="stylesheet" type="text/css" href="css/zzsc.css">
    <link rel="stylesheet" href="css/style2.css">


    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/main.css">


    <link rel="stylesheet" href="//simurai.com/archive/buttons/buttons.css">
    <!--<link rel="stylesheet" href="css/icon.css">-->
    <style type="text/css">
        body { text-align: center }
    </style>

</head>
<body onload="reload()">



<!--<div id="jeans-pocket" class="entry"; style="text-align: center">-->
    <!--<div></div>-->
<!--</div>-->
<script type="text/javascript">

    function reload() {


        if(document.referrer == '')
        {
            document.open()
            document.write("<strong> Please do not directly visit this site </strong>")
            document.close()

        }

        var user_name = window.location.href.split("=")[1];

        var uname = document.getElementById("name").innerHTML="你好,用户"+user_name

        var games = 0, technology = 0, military = 0, economy = 0, sports = 0, entertainment = 0, education = 0, phone = 0, car = 0, tour = 0
//        var inside=0, outside=0, society=0, economy=0, sports=0, entertainment =0;
        var xmlhttp;
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var json = xmlhttp.responseText;
                //console.log(json);
                //json=eval('('+json+')');
                var json = JSON.parse(json);
                if (json["code"] == 0) {
                    //alert("修改成功");

                    if (json["res"].entertainment == 0) {
                        var a = document.getElementById("default");
                        a.checked = false;
                    }
                    if (json["res"].sports == 0) {
                        var b = document.getElementById("primary");
                        b.checked = false;
                    }
                    if (json["res"].economy == 0) {
                        var c = document.getElementById("info");
                        c.checked = false;
                    }
                    if (json["res"].military == 0) {
                        var d = document.getElementById("success");
                        d.checked = false;
                    }
                    if (json["res"].technology == 0) {
                        var e = document.getElementById("danger");
                        e.checked = false;
                    }
                    if (json["res"].games == 0) {
                        var f = document.getElementById("warning");
                        f.checked = false;
                    }
                    if (json["res"].education == 0) {
                        var g = document.getElementById("education");
                        g.checked = false;
                    }
                    if (json["res"].phone == 0) {
                        var j = document.getElementById("phone");
                        j.checked = false;
                    }
                    if (json["res"].tour == 0) {
                        var h = document.getElementById("tour");
                        h.checked = false;
                    }
                    if (json["res"].car == 0) {
                        var i = document.getElementById("car");
                        i.checked = false;
                    }


                    ailearn(user_name);

                    console.log("over");
                }
                if (json["code"] == 1) {
                    alert("出错");
                }
                //document.write(json);
            }
        };


//        xmlhttp.open('GET', "CheckInfo.php?user_name="+user_name, false);
//        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
//        xmlhttp.send();


        xmlhttp.open("POST", "CheckInfo.php", true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("user_name=" + encodeURIComponent(user_name));


    }


    function ailearn() {

        var user_name = window.location.href.split("=")[1];

        var xmlhttp;
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var json = xmlhttp.responseText;
                console.log(json);
                //json=eval('('+json+')');
                var json = JSON.parse(json);
                if (json["code"] == 0) {

                    var objectList = new Array();

                    function Persion(name, times) {
                        this.name = name;
                        this.times = times;
                    }

                    objectList.push(new Persion('entertainment', json["res"].entertainment));
                    objectList.push(new Persion('sports', json["res"].sports));
                    objectList.push(new Persion('economy', json["res"].economy));
                    objectList.push(new Persion('military', json["res"].military));
                    objectList.push(new Persion('technology', json["res"].technology));
                    objectList.push(new Persion('games', json["res"].games));
                    objectList.push(new Persion('education', json["res"].education));
                    objectList.push(new Persion('phone', json["res"].phone));
                    objectList.push(new Persion('tour', json["res"].tour));
                    objectList.push(new Persion('car', json["res"].car));

                    //按年龄从小到大排序
                    objectList.sort(function (a, b) {
                        return a.times - b.times
                    });
                    for (var i = 0; i < objectList.length; i++) {
                        console.log('times:' + objectList[i].times + ' name:' + objectList[i].name);
                    }


                    switch (objectList[9].name) {
                        case 'entertainment' :
                            var a = document.getElementById("1").innerHTML = "最常关注";
                            break;
                        case 'sports' :
                            var a = document.getElementById("2").innerHTML = "最常关注";
                            break;
                        case 'economy' :
                            var a = document.getElementById("3").innerHTML = "最常关注";
                            break;
                        case 'military' :
                            var a = document.getElementById("4").innerHTML = "最常关注";
                            break;
                        case 'technology' :
                            var a = document.getElementById("5").innerHTML = "最常关注";
                            break;
                        case 'games' :
                            var a = document.getElementById("6").innerHTML = "最常关注";
                            break;
                        case 'education' :
                            var a = document.getElementById("7").innerHTML = "最常关注";
                            break;
                        case 'phone' :
                            var a = document.getElementById("8").innerHTML = "最常关注";
                            break;
                        case 'tour' :
                            var a = document.getElementById("9").innerHTML = "最常关注";
                            break;
                        case 'car' :
                            var a = document.getElementById("10").innerHTML = "最常关注";
                            break;
                    }

                }

            }
        };
//
//
//    xmlhttp.open('GET', "CheckAI.php?user_name="+user_name, false);
//    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
//    xmlhttp.send();

        xmlhttp.open("POST", "CheckAI.php", true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("user_name=" + encodeURIComponent(user_name));



    }//函数


    function confirm() {


        var user_name = window.location.href.split("=")[1];
        console.log(user_name)


        var games = 0, technology = 0, military = 0, economy = 0, sports = 0, entertainment = 0, education = 0, phone = 0, car = 0, tour = 0

        console.log(entertainment)
        console.log(sports)
        console.log(economy)
        console.log(military)
        console.log(games)

        if (document.getElementById("default").checked) {
            console.log("entertainment OK")
            entertainment = 1;
        }
        if (document.getElementById("primary").checked) {
            console.log("sports OK")
            sports = 1;
        }
        if (document.getElementById("info").checked) {
            console.log("economy OK")
            economy = 1;
        }
        if (document.getElementById("success").checked) {
            console.log("military OK")
            military = 1;
        }
        if (document.getElementById("danger").checked) {
            console.log("technology OK")
            technology = 1;
        }
        if (document.getElementById("warning").checked) {
            console.log("games OK")
            games = 1;
        }

        if (document.getElementById("education").checked) {
            console.log("education OK")
            education = 1;
        }
        if (document.getElementById("phone").checked) {
            console.log("phone OK")
            phone = 1;
        }
        if (document.getElementById("tour").checked) {
            console.log("tour OK")
            tour = 1;
        }
        if (document.getElementById("car").checked) {
            console.log("car OK")
            car = 1;
        }

        var xmlhttp;
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                var json = xmlhttp.responseText;
                console.log(json);
                //json=eval('('+json+')');
                var json = JSON.parse(json);
                if (json["code"] == 0) {
                    alert("修改成功");
                }
                if (json["code"] == 1) {
                    alert("修改失败");
                }
                //document.write(json);
            }
        };
//
//        xmlhttp.open('GET',
//                "FixInfo.php?user_name=" + user_name +
//                "&games=" + games +
//                "&technology=" + technology +
//                "&military=" + military +
//                "&economy=" + economy +
//                "&sports=" + sports +
//                "&entertainment=" + entertainment +
//                "&education=" + education +
//                "&phone=" + phone +
//                "&car=" + car +
//                "&tour=" + tour,
//                false);
//        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
//        xmlhttp.send();


        xmlhttp.open("POST", "FixInfo.php", true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("user_name=" + encodeURIComponent(user_name)
                + "&games=" + encodeURIComponent(games)
                + "&technology=" + encodeURIComponent(technology)
                + "&military=" + encodeURIComponent(military)
                + "&economy=" + encodeURIComponent(economy)
                + "&sports=" + encodeURIComponent(sports)
                + "&entertainment=" + encodeURIComponent(entertainment)
                + "&education=" + encodeURIComponent(education)
                + "&phone=" + encodeURIComponent(phone)
                + "&car=" + encodeURIComponent(car)
                + "&tour=" + encodeURIComponent(tour)
        );

    }

</script>

<div id="name"; style="margin-top: 20px;"></div>

<div class="container" style="margin-top: 0px; text-align: center">
    <div class="switch-box">
        <input id="default" class="switch-box-input" type="checkbox" checked />
        <label for="default" class="switch-box-slider"></label>
        <label for="default" class="switch-box-label"> 娱乐新闻</label>
        <label for="default" id="1" style="color: #78fc73"></label>
    </div>
    <div class="switch-box is-primary">
        <input id="primary" class="switch-box-input" type="checkbox" checked />
        <label for="primary" class="switch-box-slider"></label>
        <label for="primary" class="switch-box-label"> 体育新闻</label>
        <label for="primary" id="2" style="color: #78fc73"></label>
    </div>
    <div class="switch-box is-info">
        <input id="info" class="switch-box-input" type="checkbox" checked />
        <label for="info" class="switch-box-slider"></label>
        <label for="info" class="switch-box-label"> 经济新闻</label>
        <label for="info" id="3" style="color: #78fc73"></label>
    </div>
    <div class="switch-box is-success">
        <input id="success" class="switch-box-input" type="checkbox" checked />
        <label for="success" class="switch-box-slider"></label>
        <label for="success" class="switch-box-label"> 军事新闻</label>
        <label for="success" id="4" style="color: #78fc73"></label>
    </div>
    <div class="switch-box is-danger">
        <input id="danger" class="switch-box-input" type="checkbox" checked />
        <label for="danger" class="switch-box-slider"></label>
        <label for="danger" class="switch-box-label"> 科技新闻</label>
        <label for="danger" id="5" style="color: #78fc73"></label>
    </div>
    <div class="switch-box is-warning">
        <input id="warning" class="switch-box-input" type="checkbox" checked />
        <label for="warning" class="switch-box-slider"></label>
        <label for="warning" class="switch-box-label"> 游戏新闻</label>
        <label for="warning" id="6" style="color: #78fc73"></label>
    </div>
    <div class="switch-box is-primary">
        <input id="education" class="switch-box-input" type="checkbox" checked />
        <label for="education" class="switch-box-slider"></label>
        <label for="education" class="switch-box-label"> 教育新闻</label>
        <label for="education" id="7" style="color: #78fc73"></label>
    </div>
    <div class="switch-box is-info">
        <input id="phone" class="switch-box-input" type="checkbox" checked />
        <label for="phone" class="switch-box-slider"></label>
        <label for="phone" class="switch-box-label"> 手机新闻</label>
        <label for="phone" id="8" style="color: #78fc73"></label>
    </div>
    <div class="switch-box is-success">
        <input id="tour" class="switch-box-input" type="checkbox" checked />
        <label for="tour" class="switch-box-slider"></label>
        <label for="tour" class="switch-box-label"> 旅游新闻</label>
        <label for="tour" id="9" style="color: #78fc73"></label>
    </div>
    <div class="switch-box is-danger">
        <input id="car" class="switch-box-input" type="checkbox" checked />
        <label for="car" class="switch-box-slider"></label>
        <label for="car" class="switch-box-label"> 汽车新闻</label>
        <label for="car" id="10" style="color: #78fc73"></label>
    </div>

</div>

<div><a class="button orange morph" onclick="confirm()">确认</a> </div>

<div><a class="button orange morph" onclick="returnBack()">返回</a> </div>
<script type="text/javascript">
    function returnBack() {
        var user_name=window.location.href.split("=")[1];
        var url = "Index.html?index="+user_name;
        window.location.href = url;

    }

</script>

<!--<div id="button" class="entry">-->
    <!--<div></div>-->
<!--</div>-->
<div style="text-align: center;" >
<div id="shirt-tag" class="entry" >
    <div></div>
</div>

</div>

</body>
</html>