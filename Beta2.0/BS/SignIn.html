<!doctype html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注册</title>



    <link rel="stylesheet" type="text/css" href="css/styles.css">

    <link rel="stylesheet" href="css/normalize.css">

    <link rel="stylesheet" href="css/style.css" media="screen" type="text/css" />


    <!--<link rel="stylesheet" href="css/mycss.css">-->
    <link rel="stylesheet" href="//simurai.com/archive/buttons/buttons.css">



    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!--<link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>-->






</head>
<body>

<div class="ele-container" >
    <div class="ele-wrapper" style="margin-top:300px; ">
        <div class="ele-tail"></div>
        <div class="ele-body">
            <div class="ele-head">
                <div class="ele-eyebrows"></div>
                <div class="ele-eyes"></div>
                <div class="ele-mouth"></div>
                <div class="ele-fang-front"></div>
                <div class="ele-fang-back"></div>
                <div class="ele-ear"></div>
            </div>
        </div>
        <div class="ele-leg-1 ele-leg-back">
            <div class="ele-foot"></div>
        </div>
        <div class="ele-leg-2 ele-leg-front">
            <div class="ele-foot"></div>
        </div>
        <div class="ele-leg-3 ele-leg-back">
            <div class="ele-foot"></div>
        </div>
        <div class="ele-leg-4 ele-leg-front">
            <div class="ele-foot"></div>
        </div>
    </div>
</div>


<section class="login-form-wrap">
    <script type="text/javascript">
        function Sign(str1,str2,str3) {
            //e.preventDefault();


            var xmlhttp;
            //var myarray=new Array(str1,str2);
            console.log(str1, str2);
            if ((str1.length == 0) || (str2.length == 0)|| (str3.length == 0)) {
                alert("信息填写不完整");
                return;
            }

            if (str1.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/) == -1) {
                alert("E-mail格式错误");
                return;

            }

            if (str2.length <= 6) {
                alert("用户名过短");
                return;

            }
            if (str3.length <= 6) {
                alert("密码过短");
                return;

            }
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            else {// code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var json = xmlhttp.responseText;
                    console.log(json);
                    //json=eval('('+json+')');
                    var json = JSON.parse(json);
                    if (json["code"] == 0) {
                        alert("注册成功,可以登录");

                        window.location.href="Login.html";
//                        var index = str1;
//                        var url = "Index.html?index=" + index;
//                        window.location.href = url;
                        console.log("over");
                    }
                    if (json["code"] == 1) {
                        alert("注册失败,邮箱已存在");
                    }
                    if (json["code"] == 2) {
                        alert("注册失败,用户名已存在");
                    }
                    //document.write(json);
                }
            };


//            xmlhttp.open('GET', "login/Sign.php?id="+str1+"&password="+str3+"&user_name="+str2,false);
//            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
//            xmlhttp.send();


            xmlhttp.open("POST", "login/Sign.php", true);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.send("id=" + encodeURIComponent(str1) + "&password=" + encodeURIComponent(str3)+ "&user_name=" + encodeURIComponent(str2));

        }


    </script>




    <h1>MyNews</h1>
    <form class="login-form">
        <label>
            <input type="email" id="text1" name="email" required placeholder="Email">
        </label>
        <label>
            <input type="username" id="text2" name="username" required placeholder="Username">
        </label>
        <label>
            <input type="password" id="text3" name="password" required placeholder="Password">
        </label>
            <a class="green button" onclick="Sign(text1.value,text2.value,text3.value)">Sign In</a>
        </div>

    </form>
</section>



<!--<div style="text-align:center;clear:both">-->
<!--<script src="/gg_bd_ad_720x90.js" type="text/javascript"></script>-->
<!--<script src="/follow.js" type="text/javascript"></script>-->
<!--</div>-->


</body>
</html>

